<Page x:Class="ComputerClub.ClientLoginPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="clr-namespace:ComputerClub">
    <Grid Margin="40">
        <StackPanel x:Name="loginPanel" Width="360" VerticalAlignment="Center" HorizontalAlignment="Center">
            <TextBlock Text="Номер телефона" Style="{StaticResource FieldLabel}"/>
            <TextBox x:Name="tbPhone" Text="+7" MaxLength="18" PreviewTextInput="Phone_PreviewTextInput" TextChanged="Phone_TextChanged"/>

            <TextBlock Text="Пароль" Style="{StaticResource FieldLabel}"/>
            <Grid>
                <PasswordBox x:Name="pbPassword" Style="{StaticResource DarkInput}" Padding="12,10,48,10" Visibility="Visible"/>
                <TextBox x:Name="tbPasswordVisible" Style="{StaticResource DarkInput}" Padding="12,10,48,10" Visibility="Collapsed" IsReadOnly="False"/>
                <Button x:Name="btnTogglePassword" Style="{StaticResource PasswordToggleButton}" Click="TogglePassword_Click"/>
            </Grid>

            <Button Content="ВОЙТИ" Style="{StaticResource YellowActionButton}" Margin="0,24,0,0" Click="LoginButton_Click"/>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,24,0,0">
                <TextBlock Text="Забыли пароль?" Style="{StaticResource LinkStyle}" MouseLeftButtonDown="ForgotPassword_Click"/>
                <TextBlock Text=" • " Foreground="#555"/>
                <TextBlock Text="Регистрация" Style="{StaticResource LinkStyle}" MouseLeftButtonDown="Register_Click"/>
            </StackPanel>
        </StackPanel>

        <!-- Блок капчи — изначально полностью скрыт -->
        <Border x:Name="captchaPanel" Visibility="Collapsed" Background="#1E1E1E" BorderBrush="#444444" BorderThickness="2" CornerRadius="8" Margin="0,40,0,0" Padding="20">
            <StackPanel>
                <TextBlock Text="Введите символы ниже" FontSize="16" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,15"/>
                <Border Background="#2A2A2A" BorderBrush="#555555" BorderThickness="1" CornerRadius="6" Padding="15">
                    <Canvas x:Name="captchaCanvas" Width="300" Height="80" ClipToBounds="True"/>
                </Border>
                <TextBox x:Name="tbCaptchaInput" Margin="0,15,0,0" Padding="10" FontSize="18" MaxLength="7" KeyDown="TbCaptchaInput_KeyDown"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
                    <Button Content="Подтвердить" Width="140" Margin="0,0,20,0" Click="ConfirmCaptcha_Click"/>
                    <Button Content="Обновить" Width="100" Click="RefreshCaptcha_Click"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Page>